const express = require('express'); 
const router = express.Router(); 
const listFiles = require('../gcloudBucket.js'); 
const util = require('util');
const {exec} = require('child_process'); 


/*
request : 
- userId 
- subj
- quiz = {
    {id, q , sol}, 
    {id, q, sol},
    {id, q, sol}
}
*/


// send all as JSON file / send once 
router.get('/display', (req, res) => {
    console.log("hello");
    const {userId, subj,topic} = req.query;
    //Run ML pipeline to get -> retrieve as json 
    const mlRes = "{}" //params -> (userId, subj) so can ref the topics etc. 
    const pythonProcess = exec(`python pyfiles/quiz_rec.py topics.json`, (error, stdout, stderr) => {
      if (error) {
        console.error(`Error executing the Python script: ${error}`);
        res.status(500).send('Internal server error');
        return;
      }
      console.log(`Python script output:\n${stdout}`);
      res.send(stdout); // Send the response back to the client
    });

    // // const j = {"causes": {"questions": [{"id": 1, "question": "What was the main cause of the Civil War?", "type": "open_ended", "correct_answer": "The main cause of the Civil War was the issue of slavery."}, {"id": 2, "question": "What were the differences in the economic life of the North and the South?", "type": "open_ended", "correct_answer": "The North's economy focused on finance and manufacturing, and the South specialized in crops and agricultural trade."}, {"id": 3, "question": "How did the Southern states question the extent of the federal government's power?", "type": "open_ended", "correct_answer": "Southern states began to question the extent of the federal government's power because they wanted to maintain their own laws and institutions, including slavery."}, {"id": 4, "question": "What were some of the major events of the Civil War?", "type": "open_ended", "correct_answer": "Some of the major events of the Civil War include the Battle of Gettysburg, the Battle of Antietam, and the Battle of Vicksburg."}, {"id": 5, "question": "Who were some of the important figures in the Civil War?", "type": "open_ended", "correct_answer": "Some of the important figures in the Civil War include Abraham Lincoln, Robert E. Lee, and Ulysses S. Grant."}, {"id": 6, "question": "What were the consequences of the Civil War?", "type": "open_ended", "correct_answer": "The consequences of the Civil War included the abolition of slavery, the end of the Confederacy, and the reunification of the United States."}, {"id": 7, "question": "How did the Civil War affect the lives of African Americans?", "type": "open_ended", "correct_answer": "The Civil War had a profound impact on the lives of African Americans. It led to the abolition of slavery and the passage of the Thirteenth, Fourteenth, and Fifteenth Amendments to the United States Constitution."}, {"id": 8, "question": "What are some of the lasting legacies of the Civil War?", "type": "open_ended", "correct_answer": "Some of the lasting legacies of the Civil War include the abolition of slavery, the establishment of the supremacy of the federal government, and the division of the country into North and South."}, {"id": 9, "question": "What are some of the ways that the Civil War is still being debated today?", "type": "open_ended", "correct_answer": "The Civil War is still being debated today because there are different interpretations of its causes and consequences."}, {"id": 10, "question": "What do you think are the most important lessons that we can learn from the Civil War?", "type": "open_ended", "correct_answer": "The most important lessons that we can learn from the Civil War are that slavery is wrong, that the federal government has the power to end slavery, and that the United States is a nation that is constantly evolving and changing."}]}, "majorevents": {"questions": [{"id": 1, "question": "What was the first battle of the Civil War?", "type": "open_ended", "correct_answer": "The first shots of the Civil War were fired at Fort Sumter."}, {"id": 2, "question": "What was the bloodiest battle of the Civil War?", "type": "open_ended", "correct_answer": "The bloodiest battle of the Civil War was the Battle of Antietam."}, {"id": 3, "question": "What was the last battle of the Civil War?", "type": "open_ended", "correct_answer": "The last battle of the Civil War was the Battle of Appomattox Court House."}, {"id": 4, "question": "Who was the president of the United States during the Civil War?", "type": "open_ended", "correct_answer": "Abraham Lincoln was the president of the United States during the Civil War."}, {"id": 5, "question": "Who was the commander of the Union Army during the Civil War?", "type": "open_ended", "correct_answer": "Ulysses S. Grant was the commander of the Union Army during the Civil War."}, {"id": 6, "question": "Who was the commander of the Confederate Army during the Civil War?", "type": "open_ended", "correct_answer": "Robert E. Lee was the commander of the Confederate Army during the Civil War."}, {"id": 7, "question": "What were the main causes of the Civil War?", "type": "open_ended", "correct_answer": "The main causes of the Civil War were slavery, states' rights, and the economy."}, {"id": 8, "question": "What were the main consequences of the Civil War?", "type": "open_ended", "correct_answer": "The main consequences of the Civil War were the abolition of slavery, the establishment of the supremacy of the federal government, and the granting of African-American males the right to vote."}, {"id": 9, "question": "How many Americans died in the Civil War?", "type": "open_ended", "correct_answer": "More than 600,000 Americans died in the Civil War."}, {"id": 10, "question": "What were the Thirteenth, Fourteenth, and Fifteenth Amendments to the United States Constitution?", "type": "open_ended", "correct_answer": "The Thirteenth, Fourteenth, and Fifteenth Amendments to the United States Constitution outlawed slavery, granted African Americans United States citizenship, and granted African-American males the right to vote."}]}, "figures": {"questions": [{"id": 1, "question": "Who was the president of the United States during the Civil War?", "type": "open_ended", "correct_answer": "Abraham Lincoln"}, {"id": 2, "question": "Who was the president of the Confederate States of America during the Civil War?", "type": "open_ended", "correct_answer": "Jefferson Davis"}, {"id": 3, "question": "Who was the commander of the Union Army during the Civil War?", "type": "open_ended", "correct_answer": "Ulysses S. Grant"}, {"id": 4, "question": "Who was the commander of the Confederate Army during the Civil War?", "type": "open_ended", "correct_answer": "Robert E. Lee"}, {"id": 5, "question": "What was the name of the battle that took place at Fort Sumter?", "type": "open_ended", "correct_answer": "The Battle of Fort Sumter"}, {"id": 6, "question": "What was the name of the battle that took place at the Battle of the Ironclads?", "type": "open_ended", "correct_answer": "The Battle of the Ironclads"}, {"id": 7, "question": "What was the name of the battle that took place at First Bull Run/Manassas?", "type": "open_ended", "correct_answer": "The First Battle of Bull Run/Manassas"}, {"id": 8, "question": "What was the name of the battle that took place at Shiloh?", "type": "open_ended", "correct_answer": "The Battle of Shiloh"}, {"id": 9, "question": "What was the name of the battle that took place at Antietam?", "type": "open_ended", "correct_answer": "The Battle of Antietam"}, {"id": 10, "question": "What was the name of the battle that took place at Gettysburg?", "type": "open_ended", "correct_answer": "The Battle of Gettysburg"}]}, "consequences": {"questions": [{"id": 1, "question": "How many Americans died in the Civil War?", "type": "open_ended", "correct_answer": "More than 600,000 Americans lost their lives"}, {"id": 2, "question": "What amendments were passed as a result of the Civil War?", "type": "open_ended", "correct_answer": "The Thirteenth, Fourteenth, and Fifteenth Amendments"}, {"id": 3, "question": "What did the Thirteenth Amendment do?", "type": "open_ended", "correct_answer": "Outlawed slavery"}, {"id": 4, "question": "What did the Fourteenth Amendment do?", "type": "open_ended", "correct_answer": "Granted African Americans United States citizenship"}, {"id": 5, "question": "What did the Fifteenth Amendment do?", "type": "open_ended", "correct_answer": "Granted African-American males the right to vote"}, {"id": 6, "question": "How did the Civil War affect the treatment of African Americans?", "type": "open_ended", "correct_answer": "Although equal treatment under the law for African Americans would not be enforced until almost a hundred years later"}, {"id": 7, "question": "What was the supremacy of the federal government?", "type": "open_ended", "correct_answer": "The supremacy of the federal government was established"}, {"id": 8, "question": "What were some of the major events of the Civil War?", "type": "open_ended", "correct_answer": "The first shots of the Civil War were fired at Fort Sumter"}, {"id": 9, "question": "Who were some of the key figures in the Civil War?", "type": "open_ended", "correct_answer": "Abraham Lincoln"}, {"id": 10, "question": "What was the legacy of the Civil War?", "type": "open_ended", "correct_answer": "The Civil War abolished slavery and established the supremacy of the federal government"}]}}
   
    // res.json({"questions" : j.causes.questions.concat(j.consequences.questions).concat(j.majorevents.questions)});

})


module.exports = router;



